# Инструкция по загрузке исправленного SMS файла

## Что исправлено:

1. **Поддержка разных типов SMS:**
   - `type: "verification"` - Коды подтверждения с префиксом "Ваш код подтверждения: 1234"
   - `type: "notification"` - Уведомления без префикса "Ваш заказ успешно оформлен! Общая сумма: X TJS"

2. **Правильная обработка DEV MODE:**
   - Когда `$DEV_MODE = true` - SMS не отправляются, только логируются
   - Когда `$DEV_MODE = false` - SMS отправляются реально через OsonSMS API

3. **Нормализация номеров:**
   - Автоматическое удаление кода страны 992
   - Проверка длины номера (должно быть 9 цифр)

## Как загрузить на сервер:

### Вариант 1: Через FTP
1. Скачайте файл `sms-corrected.php` из вашего проекта
2. Подключитесь к серверу tajstore.ru через FTP клиент (FileZilla, WinSCP и т.д.)
3. Найдите папку `/simin/`
4. Переименуйте старый `sms.php` в `sms.php.backup` (для резервной копии)
5. Загрузите `sms-corrected.php` и переименуйте его в `sms.php`

### Вариант 2: Через панель управления хостингом (cPanel, Plesk и т.д.)
1. Войдите в панель управления хостингом
2. Откройте File Manager (Менеджер файлов)
3. Перейдите в папку `/simin/`
4. Сделайте резервную копию старого файла
5. Загрузите новый файл как `sms.php`

### Вариант 3: Через SSH (если есть доступ)
\`\`\`bash
cd /path/to/simin/
cp sms.php sms.php.backup
# Загрузите новый файл через scp или скопируйте содержимое
nano sms.php
# Вставьте содержимое из sms-corrected.php
\`\`\`

## Проверка работы:

После загрузки файла попробуйте:

1. **Регистрацию нового пользователя** - должен прийти SMS:
   \`\`\`
   Ваш код подтверждения: 1234
   \`\`\`

2. **Оформление заказа** - должен прийти SMS:
   \`\`\`
   Ваш заказ успешно оформлен! Общая сумма: 6.00 TJS. Cafe Simin благодарит вас!
   \`\`\`

## Важно:

- Убедитесь, что `$DEV_MODE = false;` для продакшена
- Учетные данные OsonSMS уже настроены в файле:
  - Login: 'cafe Simin'
  - Hash: '17e6c7a8ee5ae228610e0c62554aefa9'
  - Sender: 'Cafe Simin'

Если SMS всё ещё не отправляются, проверьте логи сервера или обратитесь в поддержку OsonSMS для проверки учетных данных.
