# Инструкция по установке SMS API для продакшена

## Проблема
SMS не отправляются, потому что на сервере `tajstore.ru/simin/sms.php` включен режим разработки (`$DEV_MODE = true`).

## Решение
Вам нужно заменить файл на сервере обновленной версией.

## Шаги для установки:

### 1. Скачайте файл
Файл `sms-production.php` из этого проекта содержит правильную конфигурацию для продакшена.

### 2. Загрузите на сервер
Используя FTP клиент (FileZilla, WinSCP и т.д.) или панель управления хостингом:

1. Подключитесь к серверу `tajstore.ru`
2. Перейдите в папку `/simin/`
3. Найдите файл `sms.php`
4. **Сделайте резервную копию** старого файла (переименуйте в `sms.php.backup`)
5. Загрузите файл `sms-production.php` и переименуйте его в `sms.php`

### 3. Проверьте настройки

Откройте загруженный файл и убедитесь, что:

\`\`\`php
$DEV_MODE = false; // Должно быть false для продакшена
\`\`\`

Также проверьте данные для OsonSMS API:
\`\`\`php
$login = 'cafesimin'; // Ваш логин
$hash_key = 'c8e879b26ba94d78b02fc2c88e70ac03'; // Ваш ключ
\`\`\`

### 4. Проверьте работу

После загрузки файла:
1. Откройте приложение
2. Попробуйте войти с номером телефона
3. SMS должна прийти на реальный номер

### 5. Отладка (если SMS не приходят)

Проверьте логи сервера:
- Путь к логам обычно: `/var/log/apache2/error.log` или `/var/log/nginx/error.log`
- Ищите строки с `[SMS API]`

Возможные проблемы:
- Неверный логин или hash_key для OsonSMS
- Недостаточно баланса в аккаунте OsonSMS
- Функция `file_get_contents()` заблокирована на хостинге (нужно включить `allow_url_fopen`)

### 6. Если file_get_contents заблокирован

Замените блок отправки на cURL:

\`\`\`php
$ch = curl_init($full_url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$response = curl_exec($ch);
curl_close($ch);
\`\`\`

## Важные замечания

1. **Никогда не включайте DEV_MODE в продакшене** - клиенты не получат SMS
2. **Храните hash_key в секрете** - это ваш ключ безопасности
3. **Следите за балансом OsonSMS** - SMS не будут отправляться при нулевом балансе
4. **Логи важны** - они помогут найти проблемы с отправкой

## Поддержка

Если после установки SMS всё ещё не отправляются:
1. Проверьте логи сервера
2. Убедитесь, что `$DEV_MODE = false`
3. Проверьте баланс в личном кабинете OsonSMS
4. Убедитесь, что логин и hash_key правильные
